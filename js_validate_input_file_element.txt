//<input type="file" name="inputFileElement" class="form-control" accept="image/png" required />
//<small id="messageElement"></small>
//<button type="submit" class="btn btn-primary me-1" id="uploadBtnElement">Submit</button>

// Select DOM elements
const inputFileElement = document.querySelector('input[type="file"][name="inputFileElement"]');
const messageElement = document.getElementById('messageElement');
const uploadBtnElement = document.getElementById('uploadBtnElement');

// Define constants
const requiredWidth = 800;
const requiredHeight = 600;
const maxSizeInBytes = 100 * 1024 * 1024; // 100MB

// Add event listener to file input
inputFileElement.addEventListener('change', function(event) {
  const file = event.target.files[0];

  // Validate file type
  if (file.type !== 'image/png') {
    handleInvalidFile('Please select an image/png file.', 'red');
    return;
  }

  // Validate file size
  if (file.size > maxSizeInBytes) {
    handleInvalidFile('Please select a file smaller than 100MB.', 'red');
    return;
  }

  // Create an image element to check the pixel dimensions
  const img = new Image();

  img.onload = function() {
    // Validate pixel dimensions
    if (this.width !== requiredWidth || this.height !== requiredHeight) {
      handleInvalidFile(`Please select an image with dimensions ${requiredWidth}x${requiredHeight}.`, 'red');
      return;
    }

    // File type, size, and pixel dimensions are valid
    setMessage('Valid file', 'green');
    // ...
  };

  img.onerror = function() {
    handleInvalidFile('Unable to load the image.', 'red');
  };

  img.src = URL.createObjectURL(file);
});

// Handle invalid file
function handleInvalidFile(msg, color) {
  setMessage(msg, color);
  inputFileElement.value = ''; // Reset the file input
}

// Set message and update styles
function setMessage(msg, color) {
  inputFileElement.style.borderColor = color;
  messageElement.style.color = color;
  messageElement.textContent = msg;
  uploadBtnElement.disabled = (color === 'red');
}
